# WECG TPAC Nov 14, 2025

No sessions were scheduled for this day, but some of the people met to discuss the sidebar alignment as a follow-up to yesterday.


## Agenda

 * Sidebar alignment


## Attendees

 * Rob Wu (Mozilla)
 * Kiara Rose (Apple)
 * Carlos Jeurissen (Independent)
 * Simeon Vincent (Mozilla)
 * Devlin Cronin (Google Chrome)
 * Oliver Dunk (Google Chrome)


## Notes


### Sidebar alignment

Introduction:

 * [Issue 128](https://github.com/w3c/webextensions/issues/128): Proposal: agree on a unified sidebar API for mv3
 * [rob] Let's populate the document with topics we'd like to cover today and discuss them.

Topic: object aliases

 * [kiara] In Safari's work in progress implementation, sidebarAction, sidepanel and sidebar are not strict aliases of each other. Although they share the implementation, the API namespaces are distinct objects.
 * [kiara] Would Firefox create direct aliases?
 * [rob] In Firefox the `sidebarAction` and `sidebar` objects would be separate, which allows us to have namespace-specific properties/methods.
 * [oliver] Devlin's preference was for the objects to be separate.

Topic: Opera and Naver Whale compatibility

 * [carlos] How much do we want to cover for Opera and Naver Whale who have their own sidebar implementation similar to Firefox.

Topic: contextual vs global vs hybrid

 * [carlos] An extension may wish to have a global sidebar but only have it open on certain tabs. Would it make sense to decouple the tab open state from the window open state?

Topic: `sidebar.open()`

 * [kiara] How should `sidebar.open()` behave? Chrome plans on aliasing sidebar and sidePanel, and in yesterday's discussion, we agreed that passing a `tabId` in `sidePanel.close()` should throw an error and not close the global sidePanel. This behavior differs from `sidePanel.open()`. In the meeting, we mentioned that ideally, we would want the behaviors of these two APIs to be similar, so how should we handle sidebar.open/close?
 * [rob] `sidebarAction.open()` currently takes no parameters and just opens the sidebar. `sidePanel.open()` optionally takes `windowId`/`tabId` options to open a context, with special behaviors if context-specific sidebars exist.
 * [carlos] Does it even make sense to reopen the global if you close the contextual?
 * [rob] So in Chrome, when `sidepanel.close()` is called for a tab that does not have a tab-specific sidepanel.
 * [simeon] Would be helpful to enumerate all cases
 * [carlos] I believe we could solve this by decoupling the open state from the contextual state. This allows open and close to follow direct instructions from the developer. If only a global panel exists, and you call it to open on a specific tab only, it should only open in that specific tab.
 * Scenarios
   * Global sidepanel open, contextual sidepanel defined and manually closed by user. Tab does therefore not have a sidepanel. What should `close(tabId)` do?
     * [rob] According to [Chrome's IDL comment](https://source.chromium.org/chromium/chromium/src/+/main:chrome/common/extensions/api/side_panel.idl;l=173;drc=f7bbb7bc33939a62ded71554c29a24ddda72b995), `close()` should be no-op if the sidepanel is closed.
     * [carlos] Given the scenario a global sidebar is open, and a contextual one. Currently in Chrome closing the contextual closes the sidebar on that tab. And makes it reappear when you switch to another tab and return back. This feels weird.
     * [carlos] Would it make sense to allow closing a specific sidePanel while keeping it open for other tabs?
     * [carlos] In Chrome, the visibility of a sidepanel is specific to a window. Closing a sidepanel for a tab does not affect other browser windows.
     * [carlos] Firefox uses the last open/close input to determine if a sidebar should be opened ina  new window
     * [devlin] When a tab changes, the sidepanel content is still kept around until it is closed.
     * [rob] If a window has only one tab, theoretically a sidepanel can have two sidepanel documents running?
     * [devlin] Yes. “global” is not actually global, but window-specific.
     * [carlos] There is the scenario in which there is a global and contextual sidebar open. If the user in chrome closes the contextual sidebar via the ui, and the developer opens the contextual in a tab, it opens the global one as well.
     * [devlin] That is probably a bug, report a crbug
 * [rob] So, how should `sidebar.open()` behave? Same as `sidepanel.open()` or different?
 * [oliver] Different. If `tabId` is specified without there being a contextual panel defined (through `setOptions`), it throws instead of falling back to the global (window-specific) panel.
 * [rob] If you are going to change it, it may be useful to log a warning now when the issue happens.
 * [oliver] We intend to change this in `sidebar` but not change it in `sidepanel`.
 * [rob] And `sidebar.close()`?
 * [oliver] Should behave identical as `sidepanel.close()`, there should not be any fallback.
 * [rob] Great! That makes `sidebar.open()` and `sidebar.close()` consistent with each other.

Topic: manifest declaratively

 * [carlos] sidebar_action and side_panel declaration. What should we use for manifest.json? And how should that look like?
 * [kiara] “`sidebar”  `
 * [simeon] are the properties the same?
 * [carlos] no.
   * Opera: https://help.opera.com/en/extensions/sidebar-action-api/

```
{
    // Required
    "default_icon": "images/default_icon.png",
    // Optional; shown in tooltip
    "default_title" : "My Extension Title",
    // Required
   "default_panel": "panel.html"
}
```

 * Naver whale: https://developers.whale.naver.com/tutorials/sidebarAction/

```
{
    "default_page": "sidebar.html",  // 필수
    "default_icon": {                // 필수
        "16": "images/icon16.png"
    },

    "default_title": "사이드바앱",      // 선택
    "use_navigation_bar": true       // 선택
}
```

 * [rob] The only defined property is `side_panel.default_path`. In Firefox it is called `sidebar_action.default_panel`. I think that `default_path` makes sense.
 * [rob] We also have `default_title` and `default_icon` to configure the sidebar button trigger, and `open_at_install` boolean to configure the desired panel visibility at installation.
 * [kiara] Safari parses `default_title`, `default_path` and `default_path`
 * [carlos] What about icon_variants?
 * [rob] Neither of us support it.
 * [kiara] we would plan to support
 * [rob] Why is `default_title` missing from Chrome?
 * [carlos] They use manifest.json's `short_name`.
 * [rob] Is absence of default_title and default_icon by design and permanent in Chrome? Do you see a future where these properties may exist?
 * [devlin] Originally we did not even have a UI for users. This has changed, but my apprehension is that this can also change in the future (UI is not under the control of extensions team).
 * [rob] In Firefox we recently added UI to allow users to toggle the visibility of the sidebar button. Because the sidebar button title can be customized, the question is what to display as the icon. An initial implementation used the button title, but now it is the extension name.
 * [oliver] I have seen extensions changing `short_name` to change the sidebar's title.

Topic: `getLayout()`

 * [rob] Is this meaningful in Safari? Do you have that concept?
 * [kiara] I don't think so.
 * [carlos] Even if you don't support “right”, returning “left” would be useful.
 * [rob] There is no setter, so this is easy to implement.

Topic: `getOptions()` and `setOptions()`

 * enabled, path & tabId (tabId to make panel contextual instead of global).

Topic: `sidepanel.setPanelBehavior()`

 * [carlos] A bit of magic behaviour. Overrides action.onClicked and extension popups. Extension developers could toggle the sidePanel in the action.onClicked handler
 * [rob] Chrome always has an extension button, even if the extension did not declare `action` in the manifest. I can imagine this to be for developers who want to configure this behavior independently of the existence of an `action`.
 * [carlos] can confirm, the action namespace is unavailable when action is not specified in the manifest
 * [carlos] another way to resolve this is always provide the action namespace
 * [kiara] “setPanelBehavior”, should it be “setBehavior” (to omit “panel”)?
 * [rob] At least it is not called “setSidepanelBehavior”.
 * [kiara] Would Chrome introduce setBehavior?
 * [devlin] Open to it.

Topic: permission

 * [carlos] what if you add the sidebar permission, would it give you access to the sidePanel namespace or only the sidebar namespace?

Topic: Sidepanel in the background

 * [rob] If a tab-specific sidepanel is opened, and then the tab becomes inactive (background). When it triggers UI (e.g. permissions.request() from action.onClicked listener in sidepanel code), what happens?
 * [oliver] Not sure.
 * [carlos] A permission prompt appears.
 * [rob] Well, when a background script does that, the same happens, so it could be reasonable?
 * [carlos] I tried alert(), this keeps the prompt inside the tab itself.
